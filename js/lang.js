const translations = {
  es: {
    greeting: "Hola, soy",
    name: "Juan Pablo Bautista",
    description: "Tecnólogo en Sistematización de Datos con experiencia en desarrollo de software web y móvil. He trabajado en proyectos reales con empresas, implementando soluciones en Laravel, React.js, Kotlin y Spring Boot. Enfocado en construir interfaces modernas, sistemas eficientes y procesos automatizados.",
    jobTitle1: "Tecnólogo en Sistematización de Datos &",
    jobTitle2: "Desarrollador Full Stack",
    specialization: "Especializado en desarrollo web, móvil y automatización de procesos.",
    experienceText: "Años de Experiencia",
    skill1: "DESARROLLO WEB",
    skillDesc1: "Desarrollo de interfaces con React.js, Next.js y Laravel. Creación de APIs RESTful con Spring Boot y PHP.",
    skill2: "DESARROLLO MÓVIL",
    skillDesc2: "Desarrollo de aplicaciones Android nativas con Kotlin. Integración con APIs y servicios en la nube.",
    skill3: "AUTOMATIZACIÓN",
    skillDesc3: "Web scraping, procesamiento de datos con expresiones regulares y automatización de procesos.",
    skill4: "BASES DE DATOS",
    skillDesc4: "Diseño e implementación de bases de datos en PostgreSQL, MySQL y MongoDB.",
    progress1: "JavaScript/React.js",
    progress2: "Laravel/PHP",
    progress3: "Kotlin/Android",
      contactTitle: "Contáctame",
    contactSubtitle: "Pongámonos en contacto",
    contactAvailability: "Estoy disponible para proyectos acordes a mis habilidades.",
    contactMethod: "Mi correo electrónico",
    formName: "Nombre",
    formPhone: "Teléfono",
    formEmail: "Correo electrónico",
    formMessage: "Escribe tu mensaje aquí",
    formButton: "Enviar Mensaje",
    formSuccess: "¡Mensaje enviado! Me pondré en contacto contigo pronto.",
    formError: "Error al enviar el mensaje. Por favor inténtalo de nuevo más tarde.",
    timeline2021: {
    title: "Inicio de mi carrera universitaria",
    description: "Ingresé a la Universidad Distrital a estudiar Tecnología en Sistematización de Datos. Durante este año adquirí bases sólidas en lógica de programación mediante pseudocódigo y comencé a programar en C y C++. Este proceso despertó mi interés por el software libre, la optimización a bajo nivel y la modificación del comportamiento de sistemas mediante programación estructurada."
  },

  timeline2022: {
  title: "Consolidación en Programación y Software Libre",
  headingSubjects: "Áreas de estudio",
  headingAchievements: "Logros personales",
  subjects: "Profundicé mis conocimientos en programación estructurada y orientada a objetos, desarrollando sistemas en C y C++ con estructuras de datos.",
  achievements: "Participé en eventos como FLISoL, aprendí instalaciones básicas con Debian y Ubuntu, y experimenté con distribuciones como Fedora, Manjaro y Garuda. También me familiaricé con la configuración de servidores en entornos GNU/Linux."
  },
  timeline2023: {
  title: "Primeros Proyectos CRUD y Desarrollo Web",
  headingSubjects: "Tecnologías aplicadas",
  headingAchievements: "Logros",
  headingLearnings: "Aprendizajes",
  subjects: "Desarrollo de sistemas CRUD monolíticos usando Java y C++, con conexión a bases de datos locales.",
  achievements: "Diseño de funcionalidades completas (crear, leer, actualizar, eliminar) en aplicaciones de escritorio funcionales.",
  learnings: "Inicié en desarrollo web con JavaScript y PHP, sentando las bases para aplicaciones dinámicas orientadas a usuario."
},

timeline2024: {
  title: "Despegue Profesional y Contribución Open Source",
  headingSubjects: "Ámbitos aplicados",
  headingAchievements: "Proyectos laborales",
  headingLearnings: "Nuevas tecnologías",
  headingOpensource: "Proyectos personales",
  headingCommunity: "Open Source & Comunidad",
  subjects: "Desarrollo web con React.js y PHP, administración de servidores FTP y herramientas backend para intranet.",
  achievements: "Trabajo en MW Moving WEB como desarrollador de componentes y gestor de producción web en entorno real.",
  learnings: "Inicié el desarrollo de apps móviles en Android con Kotlin, integrando APIs web y estructuras modernas.",
  opensource: "Refiné mis habilidades participando en proyectos personales y colaborativos, enfocados en automatización, herramientas CLI y scraping.",
  community: "Me sumé activamente a la comunidad open source, versionando mis proyectos en GitHub y compartiendo herramientas libres para otros desarrolladores."
},
timeline2025: {
  title: "Consolidación Full Stack y Experiencia Internacional",
  headingStack: "Stack Principal",
  stack: "Laravel, Livewire, TailwindCSS, Alpine.js, Eloquent ORM, Next.js, PostgreSQL, MySQL.",
  headingMobile: "Desarrollo Móvil",
  mobile: "Aplicaciones Android nativas con Kotlin, integración con APIs REST y microservicios.",
  headingFrontend: "Frontend Avanzado",
  frontend: "UI/UX con TailwindCSS y Livewire, componentes dinámicos en Next.js y JavaScript moderno.",
  headingInfra: "Infraestructura & Automatización",
  infra: "Automatización de procesos con jobs y schedulers en Laravel, despliegue local con Docker & Laravel Sail, optimización del manejo de datos y sincronización con APIs externas.",
  headingMarket: "Experiencia Internacional",
  market: "Experiencia en el sector inmobiliario estadounidense (Real Estate), trabajando de forma remota con equipos multidisciplinarios, ajustando soluciones a flujos comerciales y requerimientos de productividad reales.",
  headingIntegrations: "Integraciones y APIs",
  integrations: "Validaciones geográficas, integración con Google Maps Autocomplete API, FullCalendar, y formularios públicos con seguimiento y notificaciones por correo.",
  headingSkills: "Habilidades Desarrolladas",
  skills: "Arquitectura full stack, colaboración remota, optimización de sistemas backend, gestión de datos geolocalizados, seguridad, y experiencia en ecosistemas de producción reales."
},
timeline2026: {
  title: "Graduación y Nuevos Horizontes Profesionales",
  headingSubjects: "Cierre académico",
  headingAchievements: "Fortalezas actuales",
  headingLearnings: "Lo aprendido",
  headingNext: "Próximos pasos",
  subjects: "Graduado en Tecnología en Sistematización de Datos. Experiencia acumulada en desarrollo Android, Laravel, Next.js, APIs y bases de datos.",
  achievements: "Perfil sólido como Full Stack Developer y Android Developer. Capacidad de desarrollo completo desde el frontend al backend en entornos reales.",
  learnings: "Profundización en arquitectura web, automatización, trabajo en equipo remoto, integración de servicios, y desarrollo de apps conectadas.",
  next: "Aprender Python para automatización avanzada e IA, mejorar en Spring Boot, retomar desarrollo en C/C++ y explorar DevOps, testing y software multiplataforma."
},
portfolio: {
  title: "Portafolio",
  subtitle: "Mis trabajos recientes",
  description: "Creo en el arte, y esa ha sido mi pasión a lo largo de la vida.",
  countLabel: "Proyectos en el portafolio",
  pokeFocusDescription: "Este proyecto fue desarrollado con HTML, JavaScript y CSS vanilla. Integra lógica de juego y consumo de una API externa para mostrar datos dinámicos de Pokémon.",
  veterinariaDescription: "Esta aplicación monolítica fue desarrollada en Java y utiliza archivos CSV como sistema de almacenamiento. Está diseñada para gestionar clínicas veterinarias y está lista para escalar con una base de datos.",
  game2048Description: "Juego nativo desarrollado en Kotlin para Android. Integra Firebase para almacenar los puntajes más altos en la nube y permite competir entre jugadores.",
  ecommerceDescription: "Proyecto E-commerce con frontend en HTML, CSS y JavaScript. Backend construido con Java Spring Boot mediante API REST, integrando ambas capas mediante objetos JSON.",
  gregDescription: "Sitio web profesional para real estate con integración de Google Maps, formularios, geolocalización y sistema multilenguaje en tiempo real.",
  homologacionesDescription: "Aplicación desarrollada en React (frontend) y Node.js (backend), pensada para ser ligera, portable y fácil de desplegar. Automatiza el proceso académico de homologación entre instituciones."

}


  },
  en: {
    greeting: "Hello, I am",
    name: "Juan Pablo Bautista",
    jobTitle1: "Data Systematization Technologist &",
    jobTitle2: "Full Stack Developer",
    specialization: "Specialized in web development, mobile applications and process automation.",
    experienceText: "Years of Experience",
    skill1: "WEB DEVELOPMENT",
    skillDesc1: "Interface development with React.js, Next.js and Laravel. RESTful API creation with Spring Boot and PHP.",
    skill2: "MOBILE DEVELOPMENT",
    skillDesc2: "Native Android app development with Kotlin. Integration with APIs and cloud services.",
    skill3: "AUTOMATION",
    skillDesc3: "Web scraping, data processing with regular expressions and process automation.",
    skill4: "DATABASES",
    skillDesc4: "Database design and implementation with PostgreSQL, MySQL and MongoDB.",
    progress1: "JavaScript/React.js",
    progress2: "Laravel/PHP",
    progress3: "Kotlin/Android",
    description: "Technologist in Data Systematization with experience in web and mobile software development. I have worked on real-world projects with companies, implementing solutions using Laravel, React.js, Kotlin, and Spring Boot. Focused on building modern interfaces, efficient systems, and automated processes.",
    contactTitle: "Contact Me",
    contactSubtitle: "Let's Get In Touch",
    contactAvailability: "I am available for projects according to my skills.",
    contactMethod: "My email address",
    formName: "Name",
    formPhone: "Phone",
    formEmail: "Email",
    formMessage: "Type your message here",
    formButton: "Send Message",
    formSuccess: "Message sent! I'll get back to you soon.",
    formError: "Error sending message. Please try again later.",
    timeline2021: {
      title: "Start of My University Journey",
      description: "I started studying Data Systematization Technology at Universidad Distrital. That year I built a strong foundation in programming logic using pseudocode and began coding in C and C++. This sparked my interest in free software, low-level optimization, and system behavior modification through structured programming."
    },
    timeline2022: {
      title: "Programming Consolidation and Free Software",
      headingSubjects: "Subjects of Study",
      headingAchievements: "Personal Achievements",
      subjects: "I deepened my knowledge in structured and object-oriented programming, developing systems in C and C++ using data structures.",
      achievements: "I participated in events like FLISoL, learned basic installations with Debian and Ubuntu, and explored distributions such as Fedora, Manjaro, and Garuda. I also gained experience configuring servers in GNU/Linux environments."
    },
    timeline2023: {
  title: "First CRUD Projects and Web Development",
  headingSubjects: "Technologies Used",
  headingAchievements: "Achievements",
  headingLearnings: "What I Learned",
  subjects: "Development of monolithic CRUD systems using Java and C++, with local database integration.",
  achievements: "Designed full desktop app functionalities (create, read, update, delete).",
  learnings: "Began web development with JavaScript and PHP, laying the foundation for user-oriented dynamic applications."
},

timeline2024: {
  title: "Professional Takeoff and Open Source Contribution",
  headingSubjects: "Applied Fields",
  headingAchievements: "Work Projects",
  headingLearnings: "New Technologies",
  headingOpensource: "Personal Projects",
  headingCommunity: "Open Source & Community",
  subjects: "Web development with React.js and PHP, FTP server administration, and backend intranet tools.",
  achievements: "Worked at MW Moving WEB as a component developer and production manager in a real environment.",
  learnings: "Began Android app development with Kotlin, integrating APIs and modern architectures.",
  opensource: "Refined my skills by contributing to personal and collaborative projects focused on automation, CLI tools, and scraping.",
  community: "Actively joined the open source community, publishing my projects on GitHub and sharing free tools with other developers."
},

timeline2025: {
  title: "Full Stack Consolidation and International Experience",
  headingStack: "Main Stack",
  stack: "Laravel, Livewire, TailwindCSS, Alpine.js, Eloquent ORM, Next.js, PostgreSQL, MySQL.",
  headingMobile: "Mobile Development",
  mobile: "Native Android apps with Kotlin, integrated with REST APIs and microservices.",
  headingFrontend: "Advanced Frontend",
  frontend: "UI/UX using TailwindCSS and Livewire, dynamic components in Next.js and modern JavaScript.",
  headingInfra: "Infrastructure & Automation",
  infra: "Process automation with Laravel jobs and schedulers, local deployment using Docker & Laravel Sail, and external API sync optimization.",
  headingMarket: "International Experience",
  market: "Worked in the US real estate sector, collaborating remotely with multidisciplinary teams and adapting systems to business flows and real-world demands.",
  headingIntegrations: "Integrations and APIs",
  integrations: "Geographic validations, integration with Google Maps Autocomplete API, FullCalendar, and public forms with tracking and email notifications.",
  headingSkills: "Skills Developed",
  skills: "Full stack architecture, remote collaboration, backend system optimization, geolocation data management, security, and production-ready experience."
},
timeline2026: {
  title: "Graduation and New Professional Goals",
  headingSubjects: "Academic Completion",
  headingAchievements: "Current Strengths",
  headingLearnings: "What I Learned",
  headingNext: "Next Steps",
  subjects: "Graduated in Data Systematization Technology. Accumulated experience in Android development, Laravel, Next.js, APIs and databases.",
  achievements: "Strong profile as a Full Stack and Android Developer. Capable of complete development from frontend to backend in real-world environments.",
  learnings: "Deepened knowledge in web architecture, automation, remote teamwork, service integration, and connected app development.",
  next: "Learn Python for advanced automation and AI, improve Spring Boot skills, return to C/C++ systems and explore DevOps, testing, and cross-platform software."
},
portfolio: {
  title: "Portfolio",
  subtitle: "My Recent Work",
  description: "I believe in art, and that is my passion throughout my life.",
  countLabel: "Portfolio Items",
  pokeFocusDescription: "This project was built using HTML, JavaScript, and vanilla CSS. It implements game logic and consumes an external API to display dynamic Pokémon data.",
  veterinariaDescription: "This monolithic application was developed in Java and uses CSV files as its storage system. It is designed to manage veterinary clinics and is ready to scale with a database integration.",
  game2048Description: "Native game developed in Kotlin for Android. It integrates Firebase to store high scores in the cloud, enabling competition between players.",
  ecommerceDescription: "E-commerce project with frontend built in HTML, CSS, and JavaScript. Backend powered by Java Spring Boot REST APIs, integrated via JSON objects.",
  gregDescription: "Professional real estate website with Google Maps integration, geolocation, forms, and real-time multilingual support.",
  homologacionesDescription: "Application built with React (frontend) and Node.js (backend), designed to be lightweight, portable, and easy to deploy. It automates the academic process of course equivalency between institutions."

},



},

  pt: {
    greeting: "Olá, eu sou",
    name: "Juan Pablo Bautista",
    description: "Tecnólogo em Sistematização de Dados com experiência em desenvolvimento de software web e mobile. Atuei em projetos reais com empresas, implementando soluções com Laravel, React.js, Kotlin e Spring Boot. Foco em interfaces modernas, sistemas eficientes e processos automatizados.",
    jobTitle1: "Tecnólogo em Sistematização de Dados &",
    jobTitle2: "Desenvolvedor Full Stack",
    specialization: "Especializado em desenvolvimento web, aplicativos móveis e automação de processos.",
    experienceText: "Anos de Experiência",
    skill1: "DESENVOLVIMENTO WEB",
    skillDesc1: "Desenvolvimento de interfaces com React.js, Next.js e Laravel. Criação de APIs RESTful com Spring Boot e PHP.",
    skill2: "DESENVOLVIMENTO MÓVEL",
    skillDesc2: "Desenvolvimento de aplicativos Android nativos com Kotlin. Integração com APIs e serviços em nuvem.",
    skill3: "AUTOMAÇÃO",
    skillDesc3: "Web scraping, processamento de dados com expressões regulares e automação de processos.",
    skill4: "BANCOS DE DADOS",
    skillDesc4: "Projeto e implementação de bancos de dados com PostgreSQL, MySQL e MongoDB.",
    progress1: "JavaScript/React.js",
    progress2: "Laravel/PHP",
    progress3: "Kotlin/Android" ,
     contactTitle: "Contate-me",
    contactSubtitle: "Vamos entrar em contato",
    contactAvailability: "Estou disponível para projetos de acordo com minhas habilidades.",
    contactMethod: "Meu endereço de email",
    formName: "Nome",
    formPhone: "Telefone",
    formEmail: "Email",
    formMessage: "Digite sua mensagem aqui",
    formButton: "Enviar Mensagem",
    formSuccess: "Mensagem enviada! Entrarei em contato em breve.",
    formError: "Erro ao enviar mensagem. Por favor, tente novamente mais tarde.",
    timeline2021: {
    title: "Início da Minha Jornada Universitária",
    description: "Comecei meus estudos em Tecnologia de Sistematização de Dados na Universidad Distrital. Nesse ano, adquiri uma base sólida em lógica de programação com pseudocódigo e comecei a programar em C e C++. Esse processo despertou meu interesse por software livre, otimização de baixo nível e modificação de comportamento de sistemas com programação estruturada."
  },
    timeline2022: {
    title: "Consolidação em Programação e Software Livre",
    headingSubjects: "Áreas de estudo",
    headingAchievements: "Conquistas pessoais",
    subjects: "Aprofundei meus conhecimentos em programação estruturada e orientada a objetos, desenvolvendo sistemas em C e C++ com estruturas de dados.",
    achievements: "Participei de eventos como o FLISoL, aprendi instalações básicas com Debian e Ubuntu e explorei distribuições como Fedora, Manjaro e Garuda. Também adquiri experiência na configuração de servidores em ambientes GNU/Linux."
  },
  timeline2023: {
  title: "Primeiros Projetos CRUD e Desenvolvimento Web",
  headingSubjects: "Tecnologias aplicadas",
  headingAchievements: "Conquistas",
  headingLearnings: "Aprendizados",
  subjects: "Desenvolvimento de sistemas CRUD monolíticos usando Java e C++, com conexão a bancos de dados locais.",
  achievements: "Criação de funcionalidades completas (criar, ler, atualizar, deletar) em aplicações desktop funcionais.",
  learnings: "Comecei no desenvolvimento web com JavaScript e PHP, estabelecendo as bases para aplicações dinâmicas orientadas ao usuário."
},
timeline2024: {
  title: "Impulso Profissional e Contribuição Open Source",
  headingSubjects: "Áreas aplicadas",
  headingAchievements: "Projetos de trabalho",
  headingLearnings: "Novas tecnologias",
  headingOpensource: "Projetos pessoais",
  headingCommunity: "Open Source & Comunidade",
  subjects: "Desenvolvimento web com React.js e PHP, administração de servidores FTP e ferramentas backend para intranet.",
  achievements: "Trabalhei na MW Moving WEB como desenvolvedor de componentes e gestor de produção em ambiente real.",
  learnings: "Comecei o desenvolvimento de aplicativos Android com Kotlin, integrando APIs e arquiteturas modernas.",
  opensource: "Aperfeiçoei minhas habilidades participando de projetos pessoais e colaborativos focados em automação, ferramentas CLI e scraping.",
  community: "Participei ativamente da comunidade open source, publicando projetos no GitHub e compartilhando ferramentas livres com outros desenvolvedores."
},
timeline2025: {
  title: "Consolidação Full Stack e Experiência Internacional",
  headingStack: "Stack Principal",
  stack: "Laravel, Livewire, TailwindCSS, Alpine.js, Eloquent ORM, Next.js, PostgreSQL, MySQL.",
  headingMobile: "Desenvolvimento Mobile",
  mobile: "Aplicativos Android nativos com Kotlin, integrados com APIs REST e microsserviços.",
  headingFrontend: "Frontend Avançado",
  frontend: "UI/UX com TailwindCSS e Livewire, componentes dinâmicos em Next.js e JavaScript moderno.",
  headingInfra: "Infraestrutura e Automação",
  infra: "Automatização de processos com jobs e schedulers em Laravel, implantação local com Docker & Laravel Sail e sincronização de dados com APIs externas.",
  headingMarket: "Experiência Internacional",
  market: "Atuação no setor imobiliário dos EUA, colaborando remotamente com equipes multidisciplinares e adaptando soluções a fluxos de negócio reais.",
  headingIntegrations: "Integrações e APIs",
  integrations: "Validações geográficas, integração com Google Maps Autocomplete API, FullCalendar e formulários públicos com rastreamento e notificações por e-mail.",
  headingSkills: "Habilidades Desenvolvidas",
  skills: "Arquitetura full stack, colaboração remota, otimização de sistemas backend, gerenciamento de dados geolocalizados, segurança e experiência em ambientes de produção reais."
},

timeline2026: {
  title: "Graduação e Novos Rumos Profissionais",
  headingSubjects: "Conclusão Acadêmica",
  headingAchievements: "Forças Atuais",
  headingLearnings: "Aprendizados",
  headingNext: "Próximos Passos",
  subjects: "Graduado em Tecnologia de Sistematização de Dados. Experiência acumulada em desenvolvimento Android, Laravel, Next.js, APIs e bancos de dados.",
  achievements: "Perfil sólido como Desenvolvedor Full Stack e Android. Capaz de realizar o desenvolvimento completo do frontend ao backend em ambientes reais.",
  learnings: "Aprofundamento em arquitetura web, automação, trabalho remoto em equipe, integração de serviços e desenvolvimento de aplicativos conectados.",
  next: "Aprender Python para automação avançada e IA, melhorar com Spring Boot, retomar sistemas em C/C++ e explorar DevOps, testes e software multiplataforma."
},
portfolio: {
  title: "Portfólio",
  subtitle: "Meus Trabalhos Recentes",
  description: "Acredito na arte, e essa é a minha paixão ao longo da vida.",
  countLabel: "Projetos no portfólio",
  pokeFocusDescription: "Este projeto foi desenvolvido com HTML, JavaScript e CSS puro. Integra lógica de jogo e consome uma API externa para exibir dados dinâmicos de Pokémon.",
  veterinariaDescription: "Este aplicativo monolítico foi desenvolvido em Java e usa arquivos CSV como sistema de armazenamento. Foi projetado para gerenciar clínicas veterinárias e está pronto para ser escalado com banco de dados.",
  game2048Description: "Jogo nativo desenvolvido em Kotlin para Android. Integra o Firebase para armazenar as pontuações mais altas na nuvem e permite competição entre jogadores.",
  ecommerceDescription: "Projeto de E-commerce com frontend em HTML, CSS e JavaScript. Backend construído com Java Spring Boot e APIs REST, integrando via objetos JSON.",
  gregDescription: "Site profissional para o setor imobiliário com integração com Google Maps, formulários, geolocalização e suporte multilíngue em tempo real.",
  homologacionesDescription: "Aplicativo desenvolvido com React (frontend) e Node.js (backend), projetado para ser leve, portátil e fácil de implantar. Automatiza o processo acadêmico de equivalência de disciplinas entre instituições."

},

}
};

// Actualizar textos del formulario al cambiar idioma
function updateContactSection(lang) {
    const t = translations[lang] || translations['es']; // Fallback a español
    
    // Actualizar textos estáticos
    const contactTitle = document.getElementById('contact-title');
    const contactSubtitle = document.getElementById('contact-subtitle');
    const contactAvailability = document.getElementById('contact-availability');
    const contactMethod = document.getElementById('contact-method');
    
    if (contactTitle) contactTitle.textContent = t.contactTitle;
    if (contactSubtitle) contactSubtitle.textContent = t.contactSubtitle;
    if (contactAvailability) contactAvailability.textContent = t.contactAvailability;
    if (contactMethod) contactMethod.textContent = t.contactMethod;
    
    // Actualizar placeholders del formulario
    const nameInput = document.getElementById('name-input');
    const phoneInput = document.getElementById('phone-input');
    const emailInput = document.getElementById('email-input');
    const messageInput = document.getElementById('message-input');
    const submitBtn = document.getElementById('submit-btn');
    
    if (nameInput) nameInput.placeholder = t.formName;
    if (phoneInput) phoneInput.placeholder = t.formPhone;
    if (emailInput) emailInput.placeholder = t.formEmail;
    if (messageInput) messageInput.placeholder = t.formMessage;
    if (submitBtn) submitBtn.textContent = t.formButton;
}

// Función para detectar idioma del navegador
function detectBrowserLanguage() {
  const browserLanguages = navigator.languages ? [...navigator.languages] : [];
  if (navigator.language) browserLanguages.push(navigator.language);
  if (navigator.userLanguage) browserLanguages.push(navigator.userLanguage);
  
  const uniqueLanguages = [...new Set(browserLanguages.map(lang => lang.split('-')[0].toLowerCase()))];
  
  for (const lang of uniqueLanguages) {
    if (translations[lang]) {
      return lang;
    }
  }
  return 'es';
}

// Función principal para cambiar idioma
function setLanguage(lang, initialLoad = false) {
  // Verificar si el idioma está soportado
  if (!translations[lang]) {
    console.warn(`Idioma no soportado: ${lang}`);
    return;
  }

  // Obtener las traducciones para el idioma seleccionado
  const t = translations[lang];

  // 1. Actualizar la sección principal (hero)
  document.getElementById("greeting").textContent = t.greeting;
  document.getElementById("name").textContent = t.name;
  document.getElementById("description").textContent = t.description;

  // 2. Actualizar la sección de habilidades (skills)
  document.getElementById('job-title-1').textContent = t.jobTitle1;
  document.getElementById('job-title-2').textContent = t.jobTitle2;
  document.getElementById('specialization').textContent = t.specialization;
  document.getElementById('experience-text').textContent = t.experienceText;
  
  // Actualizar habilidades y descripciones
  for (let i = 1; i <= 4; i++) {
    const skillElement = document.getElementById(`skill-${i}`);
    const descElement = document.getElementById(`skill-desc-${i}`);
    
    if (skillElement) skillElement.textContent = t[`skill${i}`];
    if (descElement) descElement.textContent = t[`skillDesc${i}`];
  }

  // Actualizar barras de progreso (solo texto)
  for (let i = 1; i <= 3; i++) {
    const progressElement = document.getElementById(`progress-${i}`);
    if (progressElement) {
      const percentage = progressElement.querySelector('.numscroller')?.textContent || '0';
      progressElement.innerHTML = `
        ${t[`progress${i}`]}<span class="float-right"><b class="numscroller">${percentage}</b>%</span>
      `;
    }
  }

  // 3. Actualizar el botón de idioma activo
  const flag = {'es': '🇪🇸', 'en': '🇺🇸', 'pt': '🇧🇷'};
  const activeLangButton = document.getElementById('active-language');
  if (activeLangButton) {
    activeLangButton.textContent = flag[lang] || '🌐';
  }

  // 4. Guardar preferencia (excepto en carga inicial automática)
  if (!initialLoad) {
    localStorage.setItem('preferredLanguage', lang);
    showLanguageNotification(lang);
  }

  // 5. Actualizar atributo de idioma para accesibilidad
  document.documentElement.lang = lang;

  // 6. Actualizar textos del formulario de contacto
      updateContactSection(lang);

  const timelineTitle2021 = document.getElementById('timeline-2021-title');
  const timelineDesc2021 = document.getElementById('timeline-2021-description');

  if (timelineTitle2021) timelineTitle2021.textContent = t.timeline2021.title;
  if (timelineDesc2021) timelineDesc2021.innerHTML = `<p>${t.timeline2021.description}</p>`;

  const t2022 = t.timeline2022;

  const title2022 = document.getElementById('timeline-2022-title');
  const headingSubjects2022 = document.getElementById('timeline-2022-heading-subjects');
  const headingAchievements2022 = document.getElementById('timeline-2022-heading-achievements');
  const subjects2022 = document.getElementById('timeline-2022-subjects');
  const achievements2022 = document.getElementById('timeline-2022-achievements');

  if (title2022) title2022.textContent = t2022.title;
  if (headingSubjects2022) headingSubjects2022.textContent = t2022.headingSubjects;
  if (headingAchievements2022) headingAchievements2022.textContent = t2022.headingAchievements;
  if (subjects2022) subjects2022.textContent = t2022.subjects;
  if (achievements2022) achievements2022.textContent = t2022.achievements;

  const t2023 = t.timeline2023;

document.getElementById('timeline-2023-title').textContent = t2023.title;
document.getElementById('timeline-2023-heading-subjects').textContent = t2023.headingSubjects;
document.getElementById('timeline-2023-subjects').textContent = t2023.subjects;
document.getElementById('timeline-2023-heading-achievements').textContent = t2023.headingAchievements;
document.getElementById('timeline-2023-achievements').textContent = t2023.achievements;
document.getElementById('timeline-2023-heading-learnings').textContent = t2023.headingLearnings;
document.getElementById('timeline-2023-learnings').textContent = t2023.learnings;

const t2024 = t.timeline2024;

document.getElementById('timeline-2024-title').textContent = t2024.title;
document.getElementById('timeline-2024-heading-subjects').textContent = t2024.headingSubjects;
document.getElementById('timeline-2024-subjects').textContent = t2024.subjects;
document.getElementById('timeline-2024-heading-achievements').textContent = t2024.headingAchievements;
document.getElementById('timeline-2024-achievements').textContent = t2024.achievements;
document.getElementById('timeline-2024-heading-learnings').textContent = t2024.headingLearnings;
document.getElementById('timeline-2024-learnings').textContent = t2024.learnings;
document.getElementById('timeline-2024-heading-opensource').textContent = t2024.headingOpensource;
document.getElementById('timeline-2024-opensource').textContent = t2024.opensource;
document.getElementById('timeline-2024-heading-community').textContent = t2024.headingCommunity;
document.getElementById('timeline-2024-community').textContent = t2024.community;

const t2025 = t.timeline2025;

document.getElementById('timeline-2025-title').textContent = t2025.title;
document.getElementById('timeline-2025-heading-stack').textContent = t2025.headingStack;
document.getElementById('timeline-2025-stack').textContent = t2025.stack;
document.getElementById('timeline-2025-heading-mobile').textContent = t2025.headingMobile;
document.getElementById('timeline-2025-mobile').textContent = t2025.mobile;
document.getElementById('timeline-2025-heading-frontend').textContent = t2025.headingFrontend;
document.getElementById('timeline-2025-frontend').textContent = t2025.frontend;
document.getElementById('timeline-2025-heading-infra').textContent = t2025.headingInfra;
document.getElementById('timeline-2025-infra').textContent = t2025.infra;
document.getElementById('timeline-2025-heading-market').textContent = t2025.headingMarket;
document.getElementById('timeline-2025-market').textContent = t2025.market;
document.getElementById('timeline-2025-heading-integrations').textContent = t2025.headingIntegrations;
document.getElementById('timeline-2025-integrations').textContent = t2025.integrations;
document.getElementById('timeline-2025-heading-skills').textContent = t2025.headingSkills;
document.getElementById('timeline-2025-skills').textContent = t2025.skills;

const t2026 = t.timeline2026;

document.getElementById('timeline-2026-title').textContent = t2026.title;
document.getElementById('timeline-2026-heading-subjects').textContent = t2026.headingSubjects;
document.getElementById('timeline-2026-subjects').textContent = t2026.subjects;
document.getElementById('timeline-2026-heading-achievements').textContent = t2026.headingAchievements;
document.getElementById('timeline-2026-achievements').textContent = t2026.achievements;
document.getElementById('timeline-2026-heading-learnings').textContent = t2026.headingLearnings;
document.getElementById('timeline-2026-learnings').textContent = t2026.learnings;
document.getElementById('timeline-2026-heading-next').textContent = t2026.headingNext;
document.getElementById('timeline-2026-next').textContent = t2026.next;

// Portfolio Section
const p = t.portfolio;

document.getElementById("portfolio-title").textContent = p.title;
document.getElementById("portfolio-subtitle").textContent = p.subtitle;
document.getElementById("portfolio-description").textContent = p.description;
document.getElementById("portfolio-count-label").textContent = p.countLabel;

// Descripción de Poke Focus
const pokeFocusDesc = document.getElementById("poke-focus-description");
if (pokeFocusDesc) pokeFocusDesc.textContent = p.pokeFocusDescription;

document.getElementById("veterinaria-description").textContent = t.portfolio.veterinariaDescription;
document.getElementById("game2048-description").textContent = t.portfolio.game2048Description;
document.getElementById("ecommerce-description").textContent = t.portfolio.ecommerceDescription;
document.getElementById("greg-description").textContent = t.portfolio.gregDescription;

document.getElementById("homologaciones-description").textContent = t.portfolio.homologacionesDescription;
}

// Función para inicializar el idioma al cargar la página
function initializeLanguage() {
  // 1. Verificar si hay un idioma guardado en localStorage
  const savedLang = localStorage.getItem('preferredLanguage');
  
  // 2. Si no hay idioma guardado, detectar el del navegador
  const langToLoad = savedLang || detectBrowserLanguage();
  
  // 3. Cargar el idioma (indicamos si es carga inicial)
  setLanguage(langToLoad, !savedLang);
  
  // 4. Configurar event listeners para los botones de idioma
  document.querySelectorAll('.language-options button').forEach(button => {
    button.addEventListener('click', function() {
      const lang = this.getAttribute('data-lang');
      setLanguage(lang);
    });
  });
    updateContactFormTexts(lang);
}

// Inicializar al cargar el DOM
document.addEventListener('DOMContentLoaded', initializeLanguage);

// Mostrar notificación
function showLanguageNotification(lang) {
  const langNames = {'es': 'Español', 'en': 'English', 'pt': 'Português'};
  const notification = document.createElement('div');
  notification.className = 'language-notification';
  notification.textContent = `Idioma cambiado a ${langNames[lang]}`;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 2000);
}

// Manejo del formulario (similar a tu implementación actual)
document.getElementById('contact-form')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = form.querySelector('button[type="submit"]');
    const resultDiv = document.getElementById('result');
    const currentLang = document.documentElement.lang || 'es';
    const t = translations[currentLang] || translations['es'];
    
    submitBtn.disabled = true;
    submitBtn.textContent = 'Enviando...';
    
    try {
        if (typeof grecaptcha === 'undefined') {
            throw new Error('reCAPTCHA no está cargado');
        }
        
        const token = grecaptcha.getResponse();
        if (!token) {
            throw new Error(t.formErrorCaptcha || 'Por favor completa el reCAPTCHA');
        }

        const formData = {
            name: form.querySelector('#name-input').value.trim(),
            email: form.querySelector('#email-input').value.trim(),
            phone: form.querySelector('#phone-input')?.value.trim() || '',
            message: form.querySelector('#message-input').value.trim(),
            'g-recaptcha-response': token
        };

        if (!formData.name || !formData.email || !formData.message) {
            throw new Error(t.formErrorRequired || 'Campos requeridos faltantes');
        }

        const response = await fetch('http://localhost:3000/api/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        });
        
        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.error || t.formError);
        }

        const data = await response.json();
        
        if (data.success) {
            resultDiv.innerHTML = `<div class="alert alert-success">${t.formSuccess}</div>`;
            form.reset();
            
            if (typeof grecaptcha !== 'undefined') {
                grecaptcha.reset();
            }
        } else {
            throw new Error(data.error || t.formError);
        }
    } catch (error) {
        console.error('Error:', error);
        resultDiv.innerHTML = `<div class="alert alert-danger">${error.message || t.formError}</div>`;
    } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = t.formButton;
        
        setTimeout(() => {
            resultDiv.innerHTML = '';
        }, 5000);
    }
});

// Inicialización
document.addEventListener('DOMContentLoaded', function() {
  // Cargar idioma guardado o detectar automáticamente
  const savedLang = localStorage.getItem('preferredLanguage');
  setLanguage(savedLang || detectBrowserLanguage(), !savedLang);
  
  // Configurar eventos para los botones de idioma
  document.querySelectorAll('.language-options button').forEach(button => {
    button.addEventListener('click', function() {
      const lang = this.getAttribute('data-lang');
      setLanguage(lang);
    });
  });
});

// Añadir CSS para notificaciones
const style = document.createElement('style');
style.textContent = `
  .language-notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #333;
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 10000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  }
`;
document.head.appendChild(style);